<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hirdet√©s forr√°s</title>

<!-- Font Awesome ikonok -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
body {
  margin:0;
  font-family:"Segoe UI",Arial,sans-serif;
  background:#f4f6f8;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.container {
  width:90%;
  max-width:700px;
  text-align:center;
  animation:fadeIn 0.6s ease;
}
h1 {
  font-size:32px;
  margin-bottom:30px;
  color:#222;
}
.grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}
.btn {
  position:relative;
  overflow:hidden;
  display:flex;
  align-items:center;
  gap:14px;
  padding:26px;
  font-size:22px;
  border-radius:16px;
  color:white;
  border:none;
  cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,0.12);
  transition: transform 0.1s ease;
}
.btn i { font-size:30px; }
.btn:active { transform:scale(0.96); }
.facebook { background:#1877f2; }
.instagram { background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af,#515bd4); }
.google { background:#4285f4; }
.offline { background:#6c757d; }
.referral { background:#28a745; }
.other { background:#343a40; }
.thankyou {
  font-size:38px;
  font-weight:bold;
  animation:thankYouAnim 0.5s ease;
}
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
@keyframes thankYouAnim { from{opacity:0; transform:scale(0.9);} to{opacity:1; transform:scale(1);} }
</style>
</head>
<body>

<div class="container" id="main">
  <h1>Hol tal√°lkozt√°l a hirdet√©s√ºnkkel?</h1>
  <div class="grid">
    <button class="btn facebook" onclick="send('Facebook')"><i class="fa-brands fa-facebook-f"></i> Facebook</button>
    <button class="btn instagram" onclick="send('Instagram')"><i class="fa-brands fa-instagram"></i> Instagram</button>
    <button class="btn google" onclick="send('Google')"><i class="fa-brands fa-google"></i> Google</button>
    <button class="btn offline" onclick="send('Plak√°t / Sz√≥r√≥lap')"><i class="fa-solid fa-bullhorn"></i> Plak√°t / Sz√≥r√≥lap</button>
    <button class="btn referral" onclick="send('Ismer≈ës aj√°nlotta')"><i class="fa-solid fa-user-group"></i> Ismer≈ës aj√°nlotta</button>
    <button class="btn other" onclick="send('Egy√©b')"><i class="fa-solid fa-ellipsis"></i> Egy√©b</button>
  </div>
</div>

<div class="container" id="thanks" style="display:none;">
  <div class="thankyou">K√∂sz√∂nj√ºk! üôå</div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx3p1q-56zK6ud1h0XTVyhwL9wQaa5uNyjhlQNZtnfFvfp3Jir4HBzWXUKol9VQwwyU/exec"; // cser√©ld az Apps Script /exec URL-re

function send(source) {
  const entry = {
    shop: "F≈ë √ºzlet",
    source: source,
    time: new Date().toISOString()
  };

  // localStorage ment√©s
  let queue = JSON.parse(localStorage.getItem("queue") || "[]");
  queue.push(entry);
  localStorage.setItem("queue", JSON.stringify(queue));

  // UI v√°lt√°s
  document.getElementById("main").style.display = "none";
  document.getElementById("thanks").style.display = "block";

  setTimeout(() => {
    document.getElementById("thanks").style.display = "none";
    document.getElementById("main").style.display = "block";
  }, 3000);

  flush();
}

// K√ºldi a sorokat, ha van internet
function flush() {
  let queue = JSON.parse(localStorage.getItem("queue") || "[]");
  if (!queue.length || !navigator.onLine) return;

  fetch(SCRIPT_URL, {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(queue)
  })
  .then(res => {
    if(res.ok) localStorage.removeItem("queue");
  })
  .catch(err => { /* marad a queue-ben */ });
}

// 5 m√°sodpercenk√©nt pr√≥b√°lkozik, ha net van
setInterval(flush, 5000);
</script>

</body>
</html>
